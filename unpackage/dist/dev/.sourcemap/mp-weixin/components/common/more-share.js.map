{"version":3,"sources":["webpack:///E:/project/小程序/仿社区交友/components/common/more-share.vue?cb48","webpack:///E:/project/小程序/仿社区交友/components/common/more-share.vue?890b","webpack:///E:/project/小程序/仿社区交友/components/common/more-share.vue?b3fa","webpack:///E:/project/小程序/仿社区交友/components/common/more-share.vue?8ed3","uni-app:///components/common/more-share.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;;;AAGzD;AAC4N;AAC5N,gBAAgB,kOAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAu3B,CAAgB,63BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4B34B;AACA;AACA;AACA,kBADA;AAEA,iBAFA,EADA;;AAKA;AACA,kBADA;AAEA,iBAFA,EALA;;AASA;AACA,iBADA;AAEA,iBAFA,EATA,EADA;;;AAeA;AACA,sBADA,EAfA;;AAkBA,mBAlBA,+BAkBA;AACA;AACA,oDADA;AAEA,+CAFA;AAGA,2GAHA;;AAKA,GAxBA;AAyBA,MAzBA,kBAyBA;AACA;AACA,kBADA;AAEA;AACA,2BADA;AAEA,2BAFA;AAGA,oBAHA;AAIA,oBAJA;AAKA,eALA;AAMA;AACA,0BADA;AAEA,wBAFA;AAGA,mBAHA;AAIA,oBAJA;AAKA,+BALA;AAMA,eANA,EANA;AAaA;AACA,iCADA;AAEA,0BAFA;AAGA,oBAHA;AAIA,uBAJA;AAKA,eALA,EAbA;AAmBA;AACA,uBADA;AAEA,2BAFA;AAGA,oBAHA;AAIA,gBAJA;AAKA,eALA;AAMA,eANA,EAnBA,CAFA;;;AA8BA,GAxDA;AAyDA;AACA,QADA,kBACA;AACA;AACA,KAHA;AAIA,SAJA,mBAIA;AACA;AACA,KANA;AAOA,SAPA,iBAOA,CAPA,EAOA;AACA;AACA;AACA,0EAHA;;AAKA,oFALA;AAMA;AACA,qCADA;AAEA,mCAFA,IANA;;;;;AAaA,gFAbA;AAcA;AACA,qCADA;AAEA,mCAFA,IAdA;;;;;AAqBA,4BArBA,GAqBA;AACA,gCADA;AAEA,sGAFA,EAEA;AACA,uCAHA;AAIA;AACA;AACA;AACA,oCADA;AAEA,uCAFA;;AAIA,mBAVA;AAWA;AACA;AACA;AACA,uCADA;AAEA,uCAFA;;AAIA,mBAjBA;AAkBA;AACA;AACA,mBApBA;AAqBA,0CArBA;AAsBA,uCAtBA;AAuBA,oCAvBA;AAwBA,kDAxBA,EArBA;;;;AAiDA,iEAjDA;AAkDA,kCAlDA,UAkDA,qBAlDA;;AAoDA,wCApDA;AAqDA,KA5DA;AA6DA,YA7DA,sBA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,gFAFA;AAGA,4BAHA;AAIA,6BAJA;AAKA,0BALA;AAMA,+BANA;AAOA;AACA;AACA;AACA;AACA,eAXA,EAWA;AACA;AACA,8CADA;AAEA,mCAFA;;AAIA,eAhBA;AAiBA;AACA,WArBA;AAsBA,SAvBA,EAuBA;AACA;AACA;AACA,wCADA;AAEA,6BAFA;;AAIA,SA7BA;AA8BA,OAlCA;AAmCA,KAnGA,EAzDA,E","file":"components/common/more-share.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./more-share.vue?vue&type=template&id=3b590640&\"\nvar renderjs\nimport script from \"./more-share.vue?vue&type=script&lang=js&\"\nexport * from \"./more-share.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/common/more-share.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./more-share.vue?vue&type=template&id=3b590640&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./more-share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\ZERO\\\\Downloads\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./more-share.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<uniPopup ref=\"popup\" type=\"bottom\">\r\n\t\t\t<view class=\"w-100\" style=\"background-color: white;\">\r\n\t\t\t\t<view class=\"text-center py-2 font-md border-bottom border-light-secondary\">\r\n\t\t\t\t\t分享到\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column align-center justify-center py-2\" \t\r\n\t\t\t\t\thover-class=\"bg-light\"\r\n\t\t\t\t\t@tap=\"share(item)\"\r\n\t\t\t\t\t v-for=\"(item,index) in providerList\" :key=\"index\">\r\n\t\t\t\t\t\t<view style=\"height: 100rpx;width: 100rpx;\"\r\n\t\t\t\t\t\t:class=\"[item.icon,item.color]\"\r\n\t\t\t\t\t\tclass=\"iconfont text-white flex align-center justify-center font-lg rounded-circle\"></view>\r\n\t\t\t\t\t\t<text class=\"font-sm mt-1 text-muted\">{{item.name}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text-center py-2 font-md border-top\">\r\n\t\t\t\t\t取消\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uniPopup>\r\n\t</view>\n</template>\n\n<script>\r\n\timport uniPopup from '../../components/uni-ui/uni-popup/uni-popup.vue';\r\n\texport default{\r\n\t\tprops:{\r\n\t\t\ttitle : {\r\n\t\t\t\ttype : String,\r\n\t\t\t\tdefault : \"\"\r\n\t\t\t},\r\n\t\t\tshareText : {\r\n\t\t\t\ttype : String,\r\n\t\t\t\tdefault : \"\"\r\n\t\t\t},\r\n\t\t\timage : {\r\n\t\t\t\ttype : Array,\r\n\t\t\t\tdefault : []\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tuniPopup\r\n\t\t},\r\n\t\tonShareAppMessage() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.title ? this.title : \"欢迎体验uni-app\",\r\n\t\t\t\tpath: '/pages/tabBar/component/component',\r\n\t\t\t\timageUrl:this.image ? this.image : 'https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tshareType:0,\r\n\t\t\t\tproviderList : [{\r\n\t\t\t\t\ticon : \"icon-weixin\",\r\n\t\t\t\t\tcolor : \"bg-success\",\r\n\t\t\t\t\tname : \"微信好友\",\r\n\t\t\t\t\tid: 'weixin',\r\n\t\t\t\t\ttype : 0\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon : \"icon-huati\",\r\n\t\t\t\t\tcolor : \"bg-dark\",\r\n\t\t\t\t\tname : \"朋友圈\",\r\n\t\t\t\t\tid: 'weixin',\r\n\t\t\t\t\ttype:'WXSenceTimeline',\r\n\t\t\t\t\tsort:1\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon : \"icon-xinlangweibo\",\r\n\t\t\t\t\tcolor : \"bg-danger\",\r\n\t\t\t\t\tname : \"新浪微博\",\r\n\t\t\t\t\tid: 'sinaweibo',\r\n\t\t\t\t\tsort:2\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon : \"icon-QQ\",\r\n\t\t\t\t\tcolor : \"bg-primary\",\r\n\t\t\t\t\tname : \"QQ好友\",\r\n\t\t\t\t\tid: 'qq',\r\n\t\t\t\t\tsort : 3,\r\n\t\t\t\t\ttype : 1\r\n\t\t\t\t}],\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\topen(){\r\n\t\t\t\tthis.$refs.popup.open()\r\n\t\t\t},\r\n\t\t\tclose(){\r\n\t\t\t\tthis.$refs.popup.close()\r\n\t\t\t},\r\n\t\t\tasync share(e) {\r\n\t\t\t\tthis.shareType = 1;\r\n\t\t\t\tconsole.log(this.image)\r\n\t\t\t\tconsole.log('分享通道:'+ e.id +'； 分享类型:' + this.shareType);\r\n\t\t\t\t\r\n\t\t\t\tif(!this.shareText && (this.shareType === 1 || this.shareType === 0)){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:'分享内容不能为空',\r\n\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(!this.image && (this.shareType === 2 || this.shareType === 0)){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:'分享图片不能为空',\r\n\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet shareOPtions = {\r\n\t\t\t\t\tprovider: e.id,\r\n\t\t\t\t\tscene: e.type && e.type === 'WXSenceTimeline' ? 'WXSenceTimeline' : 'WXSceneSession', //WXSceneSession”分享到聊天界面，“WXSenceTimeline”分享到朋友圈，“WXSceneFavorite”分享到微信收藏     \r\n\t\t\t\t\ttype: this.shareType,\r\n\t\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\t\tconsole.log('success', e);\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '已分享',\r\n\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (e) => {\r\n\t\t\t\t\t\tconsole.log('fail', e)\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: e.errMsg,\r\n\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete:function(){\r\n\t\t\t\t\t\tconsole.log('分享操作结束!')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsummary : this.shareText,\r\n\t\t\t\t\timageUrl : this.image,\r\n\t\t\t\t\ttitle : this.title,\r\n\t\t\t\t\thref : 'https://uniapp.dcloud.io'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(shareOPtions.type === 0 && plus.os.name === 'iOS'){//如果是图文分享，且是ios平台，则压缩图片 \r\n\t\t\t\t\tshareOPtions.imageUrl = await this.compress();\r\n\t\t\t\t}\r\n\t\t\t\tuni.share(shareOPtions);\r\n\t\t\t},\r\n\t\t\tcompress(){//压缩图片 图文分享要求分享图片大小不能超过20Kb\r\n\t\t\t\tconsole.log('开始压缩');\r\n\t\t\t\tlet img = this.image;\r\n\t\t\t\treturn new Promise((res) => {\r\n\t\t\t\t\tvar localPath = plus.io.convertAbsoluteFileSystem(img.replace('file://', ''));\r\n\t\t\t\t\tconsole.log('after' + localPath);\r\n\t\t\t\t\t// 压缩size\r\n\t\t\t\t\tplus.io.resolveLocalFileSystemURL(localPath, (entry) => {\r\n\t\t\t\t\t\tentry.file((file) => {// 可通过entry对象操作图片 \r\n\t\t\t\t\t\t\tconsole.log('getFile:' + JSON.stringify(file));\r\n\t\t\t\t\t\t\tif(file.size > 20480) {// 压缩后size 大于20Kb\r\n\t\t\t\t\t\t\t\tplus.zip.compressImage({\r\n\t\t\t\t\t\t\t\t\tsrc: img,\r\n\t\t\t\t\t\t\t\t\tdst: img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG'),\r\n\t\t\t\t\t\t\t\t\twidth: '10%',\r\n\t\t\t\t\t\t\t\t\theight: '10%',\r\n\t\t\t\t\t\t\t\t\tquality: 1,\r\n\t\t\t\t\t\t\t\t\toverwrite: true\r\n\t\t\t\t\t\t\t\t}, (event) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('success zip****' + event.size);\r\n\t\t\t\t\t\t\t\t\tlet newImg = img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG');\r\n\t\t\t\t\t\t\t\t\tres(newImg);\r\n\t\t\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\tcontent:'分享图片太大,需要请重新选择图片!',\r\n\t\t\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, (e) => {\r\n\t\t\t\t\t\tconsole.log('Resolve file URL failed: ' + e.message);\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent:'分享图片太大,需要请重新选择图片!',\r\n\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}